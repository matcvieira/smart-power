#!/usr/bin/env python
# -*- coding: utf-8 -*-
from PySide import QtCore, QtGui
from cursor import Cursor
import math
import sys

class MainWindow(QtGui.QMainWindow):

    def __init__(self):
        super(MainWindow, self).__init__()
        self.cursor = Cursor("")
        self.setCursor(self.cursor)
        self.scene = SceneSpecial(self)
        self.view = QtGui.QGraphicsView(self.scene, self)
        self.resize(1000, 700)
        self.view.resize(100,200)
        self.show()

    def mouseReleaseEvent(self, mouse_event):
    	self.cursor.setShapePad(self)
        super(MainWindow, self).mouseReleaseEvent(mouse_event)
        print "release"
        self.scene.mouseReleaseEvent(QEvent.GraphicsSceneMouseRelease())
    
    def mousePressEvent(self, mouse_event):
    	self.cursor.setShapeSubs(self)
        super(MainWindow, self).mousePressEvent(mouse_event)
        print "press"
        

class SceneSpecial(QtGui.QGraphicsScene):
    def __init__(self, parent):
        super(SceneSpecial, self).__init__(parent)

    def mouseReleaseEvent(self, mouse_event):
        super(SceneSpecial, self).mouseReleaseEvent(mouse_event)
        ell = QtGui.QGraphicsEllipseItem()
        ell.setRect(
            QtCore.QRectF(
                mouse_event.scenePos()-QtCore.QPointF(15, 15),
                QtCore.QSizeF(30, 30)))
        self.addItem(ell)

    def paint(self, painter, option, widget):
        self.rectangle = QtCore.QRectF(10.0, 20.0, 80.0, 60.0)
        painter.drawRect(self.rectangle)

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    '''
    cursor = QtGui.QCursor(QtGui.QBitmap(u"icones/iconSubstation.png"), -1, -1)
    cursorSubs = QtGui.QCursor(QtGui.QBitmap(u"icones/iconSubstation.png"), -1, -1 )
    cursorRecl = QtGui.QCursor(QtGui.QBitmap(u"icones/iconRecloser.png"), -1, -1 )
    cursorNode = QtGui.QCursor(QtGui.QBitmap(u"icones/iconNode.png"), -1, -1 )
    cursorBus = QtGui.QCursor(QtGui.QBitmap(u"icones/iconBus.png"), -1, -1 )
    app.setOverrideCursor(cursor)
    '''
    widget = MainWindow()
    widget.show()
    sys.exit(app.exec_())
